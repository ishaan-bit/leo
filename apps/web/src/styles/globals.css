@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---- Mobile-first cross-platform polish (iOS + Android) ---- */

/* Remove all default margins and padding */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Improve text rendering and avoid aggressive text reflow */
html {
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
}

/* Base body tweaks (background is also set in layout.tsx) */
body {
  @apply antialiased;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;

  /* Avoid elastic bounce creating accidental refresh on mobile UIs */
  overscroll-behavior-y: contain;
}

/* Respect user motion preferences */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Remove heavy tap highlight while keeping accessibility */
* {
  -webkit-tap-highlight-color: rgba(0,0,0,0.08);
}

/* Avoid iOS zoom-on-focus by ensuring 16px+ text in form controls */
input, select, textarea, button {
  font-size: 16px;
}

/* Larger touch targets by default for key buttons/links */
.btn, button, [role="button"] {
  min-height: 44px; /* Apple HIG minimum */
  min-width: 44px;
}

/* Prevent accidental pull-to-refresh in nested scroll areas */
.scroll-area {
  overscroll-behavior: contain;
}

/* Safe-area helpers for devices with notches/home indicators */
.safe-paddings {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* Mobile viewport height that behaves with browser UI (iOS/Android) */
.min-h-screen-mobile {
  min-height: 100dvh; /* modern dynamic viewport */
}

/* Fallback if 100dvh unsupported */
@supports not (height: 100dvh) {
  .min-h-screen-mobile { min-height: 100vh; }
}

/* Subtle selection color aligned with the palette */
::selection {
  background: #fecdd3; /* rose-200 */
  color: #3f0a0a;
}

/* Utility: soft glass card style for liminal feel */
.glass {
  background: rgba(255,255,255,0.5);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,0.35);
  box-shadow: 0 8px 24px rgba(16, 7, 7, 0.08);
}

/* Text tokens for the project (optional, matches liminal palette) */
:root {
  --leo-text: #581c1c;     /* deep pink-brown */
  --leo-muted: #9f1239;    /* rose-700 */
}
.text-leo { color: var(--leo-text); }
.text-leo-muted { color: var(--leo-muted); }

/* Animated gradient background for ritual page */
@keyframes gradientShift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

.gradient-animated {
  background: linear-gradient(135deg, #fce7f3, #fed7aa, #e9d5ff, #fbcfe8);
  background-size: 300% 300%;
  animation: gradientShift 20s ease infinite;
}

/* Floating particles */
@keyframes floatParticle {
  0%, 100% { 
    transform: translate(0, 0) rotate(0deg);
    opacity: 0.3;
  }
  33% {
    transform: translate(20px, -30px) rotate(120deg);
    opacity: 0.6;
  }
  66% {
    transform: translate(-15px, -60px) rotate(240deg);
    opacity: 0.4;
  }
}

.particle {
  position: absolute;
  width: 8px;
  height: 8px;
  background: radial-gradient(circle, rgba(251, 207, 232, 0.8), rgba(251, 207, 232, 0));
  border-radius: 50%;
  animation: floatParticle 12s ease-in-out infinite;
  will-change: transform, opacity;
}

/* Safe area utilities for notched devices */
.pt-safe { padding-top: env(safe-area-inset-top); }
.pb-safe { padding-bottom: env(safe-area-inset-bottom); }
.pl-safe { padding-left: env(safe-area-inset-left); }
.pr-safe { padding-right: env(safe-area-inset-right); }
